(window.webpackJsonpvc=window.webpackJsonpvc||[]).push([[2],{132:function(t,e,i){"use strict";i.r(e);var a=i(10),s=i.n(a),r=i(29),n=i.n(r),o=i(63),h=i.n(o),c=i(5),l=i.n(c),p=i(6),u=i.n(p),d=i(4),x=i.n(d),f=i(7),v=i.n(f),m=i(8),b=i.n(m),g=i(64),A=i.n(g),y=i(9),O=i.n(y),R=i(1),S=i(57),T=i(44),I=i(58),_=i(0),w=i(26),D=i(80),j=function(t){function e(t){x()(this,e);var i=b()(this,(e.__proto__||u()(e)).call(this,t));return i.opts=t,i}return O()(e,t),v()(e,[{key:"dataExecutor",value:function(){try{return this.dataOptions={},this.opts.data&&(this.dataOptions.data=this.opts.data),this.opts.series&&(this.dataOptions.series=this.opts.series),this.opts.yAxis&&(this.dataOptions.yAxis=this.opts.yAxis),l()(this.dataOptions,this.constructChartData()),l()(this.dataOptions,this.constructXAxisInfo()),l()(this.dataOptions,this.constructPlotInfo()),l()(this.dataOptions,this.constructYAxisInfo()),this.dataOptions}catch(t){throw console.log("Error encountered while bar series JSON parsing :",t),this.opts.onError(t),new Error("Invalid JSON received - Error on bar series JSON parsing")}}},{key:"constructChartData",value:function(){var t=this.dataOptions.data.barseries,e=t.columns,i=t.values;if(!(e.length&&i.length))throw new Error("Invalid Bar series JSON received");return{chartData:i}}},{key:"constructXAxisInfo",value:function(){return{timeInfo:{dataIndex:0,timeRange:this.dataOptions.chartData.map((function(t){return t[0]}))}}}},{key:"constructYAxisInfo",value:function(){var t=this.dataOptions,e=t.plotSet,i=t.series,a=t.chartData,r=Object(R.e)(t,"yAxis.left"),n=Object(R.e)(t,"yAxis.right"),o=void 0,h=null,c=null;return r&&s()(r.min)&&s()(r.max)&&(h=[r.min,r.max]),n&&s()(n.min)&&s()(n.max)&&(c=[n.min,n.max]),h&&c||function(){var l=!1;for(o in e)if(!s()(e[o].minVal)||!s()(e[o].maxVal)){l=!0;break}if(l){var p=0;a.forEach((function(t){for(var a in e){var s=e[a];(p=t[s.dataIndex])<s.minVal&&(s.minVal=p),p>s.maxVal&&(s.maxVal=p),i.bar&&i.bar.forEach((function(i){if(i.barType===_.a.STACKED_BAR){var a=i.barOrderMembers,s=0;a.forEach((function(i){s+=e[i.name].visible?t[e[i.name].dataIndex]:0})),s<i.valueRange[0]&&(i.valueRange[0]=s),s>i.valueRange[1]&&(i.valueRange[1]=s)}}))}}))}var u=-1/0,d=-1/0;for(o in i)o===_.a.BAR_KEY&&i[o].forEach((function(t){t.barType===_.a.GROUPED_BAR?t.barOrderMembers.forEach((function(t){e[t.name].visible&&e[t.name].plotAxis[0]===_.a.DIR_LEFT&&e[t.name].maxVal>u&&(u=e[t.name].maxVal),e[t.name].visible&&e[t.name].plotAxis[0]===_.a.DIR_RIGHT&&e[t.name].maxVal>d&&(d=e[t.name].maxVal)})):t.barType===_.a.STACKED_BAR&&(t.plotAxis[0]===_.a.DIR_LEFT&&t.valueRange[1]>u&&(u=t.valueRange[1]),t.plotAxis[0]===_.a.DIR_RIGHT&&t.valueRange[1]>d&&(d=t.valueRange[1]))}));var x=1/0,f=1/0;for(o in e)e[o].plotAxis&&"left"===e[o].plotAxis[0]&&e[o].visible&&e[o].minVal<x&&(x=e[o].minVal),e[o].plotAxis&&"right"===e[o].plotAxis[0]&&e[o].visible&&e[o].minVal<f&&(f=e[o].minVal);var v=void 0,m=void 0;[x,u].reduce((function(t,e){return s()(t)&&s()(e)}))?(v=Object(R.e)(t,"yAxis.left.min"),v=s()(v)?v:x,m=Object(R.e)(t,"yAxis.left.max"),(m=s()(m)?m:u)||(m=v+80),h=[v,m]):h=!!r&&[0,80],[f,d].reduce((function(t,e){return s()(t)&&s()(e)}))?(v=Object(R.e)(t,"yAxis.right.min"),v=s()(v)?v:f,m=Object(R.e)(t,"yAxis.right.max"),(m=s()(m)?m:d)||(m=v+80),c=[v,m]):c=!!n&&[0,80]}(),{yRange:h,yRange2:c}}},{key:"constructPlotInfo",value:function(){var t=this.dataOptions,e=t.data.barseries,i=e.columns.slice(1),a=1,s={},r=t.series,n=void 0,o=e.color||[],h=Object(R.e)(t,"yAxis.left"),c=Object(R.e)(t,"yAxis.right");for(n in i.forEach((function(t){var e=Object(R.n)(t);s[e]={name:t,dataIndex:a,minVal:1/0,maxVal:-1/0,visible:!0,color:o[a]||"#000"},a++})),r)"bar"===n&&r[n].forEach((function(t){var e=t.barOrderMembers;t.valueRange=[1/0,-1/0],e.forEach((function(e){e.name=Object(R.n)(e.name);var i=e.color;if(!i)throw"Color not present for series "+t.name;i&&(s[e.name].color=i);var a=e.plotAxis||["left","bottom"];s[e.name].plotAxis=a;var r="left"===a[0]?h.unit:c.unit;s[e.name].unit=r,Object(R.h)(e.visible)&&(s[e.name].visible=e.visible)}))}));return{series:r,plotSet:s}}}]),e}(w.a),E=i(12),k=i(3),C=function(t){function e(t){x()(this,e);var i=b()(this,(e.__proto__||u()(e)).call(this));i.opts=l()({className:"",plotAxis:[_.a.DIR_LEFT,_.a.DIR_BOTTOM],barData:null,xAxisTarget:null,barType:_.a.GROUPED_BAR,barOrderMembers:{},visible:!0,events:{}},t);var a=i,s=i.opts.chart.options.plotSet;i.opts.barOrderIndex=i.opts.barOrderMembers.filter((function(t){return s[t.name].visible||!1})).map((function(t){return s[t.name].dataIndex})),i.opts.seriesLength=i.opts.barOrderIndex.length;var r=Object(R.e)(i.opts,"chart.xAxis.scale");i.opts.plotAxis.indexOf(_.a.DIR_TOP)>-1&&(r=Object(R.e)(i.opts,"chart.xAxis2.scale"));var n=Object(R.e)(i.opts,"chart.yAxis.scale");i.opts.plotAxis.indexOf(_.a.DIR_RIGHT)>-1&&(n=Object(R.e)(i.opts,"chart.yAxis2.scale")),i.xScale=r,i.yScale=n;var o=i.opts.barData;return i.opts.seriesArr=[],i.opts.xAxisArr=[],o.forEach((function(t,e){i.opts.xAxisArr.push(t[i.opts.xAxisTarget]),i.opts.barOrderIndex.forEach((function(e,i){a.opts.seriesArr[i]||(a.opts.seriesArr[i]=[]),a.opts.seriesArr[i].push(t[e])}))})),i.opts.barStack=Object(k.v)().keys(Object(k.q)(i.opts.seriesLength))(Object(k.z)(i.opts.seriesArr)),i.yMaxGrouped=Object(k.o)(i.opts.seriesArr,(function(t){return Object(k.o)(t)})),i.yMaxStacked=Object(k.o)(i.opts.barStack,(function(t){return Object(k.o)(t,(function(t){return t[1]}))})),i}return O()(e,t),v()(e,[{key:"draw",value:function(){var t=this,e=this,i={},a=this.opts.chart.options.plotSet;this.opts.barOrderMembers.filter((function(t){return a[t.name].visible||!1})).forEach((function(t,e){var s=a[t.name];i[s.dataIndex-1]=t.name}));var s=this.opts.chart.container.select("svg clipPath");this.barSeries=this.opts.chart.graphZone.selectAll(".vc-bar-series").data(this.opts.barStack).enter().append("g").attr("clip-path","url(#"+s.attr("id")+")").attr("class","vc-bar-series").attr("fill",(function(t,e){return a[i[e]].color})).attr("seriesName",(function(t,e){return i[e]})).attr("seriesIndex",(function(t,e){return e})),this.bars=this.barSeries.selectAll("rect").data((function(t){return t})).enter().append("rect").attr("x",(function(t,i){return e.xScale(e.opts.xAxisArr[i])})).attr("fill",(function(t,e){var i=Object(k.u)(this.parentNode).attr("seriesName");return a[i].colorArr&&a[i].colorArr[e]})).attr("y",this.opts.chart.chartHeight).attr("width",this.xScale.bandwidth()).attr("height",0).on("mousemove",(function(t,i){e.opts.chart.tooltip&&e.opts.chart.tooltip.hover(k.j.pageX,k.j.pageY,{data:{val:e.opts.barData[i],ind:i}})})).on("mouseout",(function(t){e.opts.chart.tooltip&&e.opts.chart.tooltip.hide()}));var r=function(i){var a=t.opts.events[i];e.bars.on(i,(function(){a.apply(e.opts.chart,arguments)}))};for(var n in this.opts.events)r(n)}},{key:"update",value:function(){var t=this;this.opts.barType===_.a.STACKED_BAR?this.bars.attr("y",(function(e){return t.yScale(e[1])})).attr("height",(function(e){return t.yScale(e[0])-t.yScale(e[1])})).attr("x",(function(e,i){return t.xScale(t.opts.xAxisArr[i])})).attr("width",t.xScale.bandwidth()):this.bars.attr("x",(function(e,i){return t.xScale(t.opts.xAxisArr[i])+t.xScale.bandwidth()/t.opts.seriesLength*Object(k.u)(this.parentNode).attr("seriesIndex")})).attr("width",t.xScale.bandwidth()/t.opts.seriesLength).attr("y",(function(e){return t.yScale(e[1]-e[0])})).attr("height",(function(e){return t.yScale(0)-t.yScale(e[1]-e[0])}))}},{key:"showHide",value:function(t){t=!!t,this.barSeries.classed("vc-hidden",!t),this.opts.visible=t}},{key:"redraw",value:function(){var t=this.opts.chart.options.plotSet;this.opts.barOrderIndex=this.opts.barOrderMembers.filter((function(e){return t[e.name].visible||!1})).map((function(e){return t[e.name].dataIndex})),this.barSeries&&this.barSeries.remove(),this.draw()}},{key:"remove",value:function(){this.barSeries&&this.barSeries.remove(),this.bars=null,this.opts=null}}]),e}(E.a),M=function(t){function e(t){x()(this,e);var i=b()(this,(e.__proto__||u()(e)).call(this));i.opts=t,i.plotSeries=[];var a=i.opts.chart.options.chartData,s=i.opts.chart.options.series,r=Object(R.g)(s.bar)&&s.bar.length,n=Object(R.g)(s.stack)&&s.stack.length,o=[];return r?o=s.bar:n&&(o=s.stack),o.forEach((function(t){i.plotSeries.push(new C({chart:i.opts.chart,className:t.className||t.name,plotAxis:t.plotAxis,xAxisTarget:i.opts.chart.options.timeInfo.dataIndex,barOrderMembers:t.barOrderMembers||t.stackOrderMembers,barType:t.barType||"",events:t.events||{},barData:a}))})),i}return O()(e,t),e}(i(60).a),P=i(59),V=function(t){function e(t,i){if(x()(this,e),i.startTime=new Date,i.dataParser||(i.dataParser=new j(i)),!(i.dataParser instanceof w.a))throw new Error("DataParser in options dosen't have implementation of ChartAxisParser");var a=b()(this,(e.__proto__||u()(e)).call(this,t,i));return Object(I.a)(a.options),Object(R.l)(a.dataParser)&&l()(a.options,a.dataParser.dataExecutor()),a.chartInitilize(),h()((function(){return a.draw()})),a}return O()(e,t),v()(e,[{key:"chartInitilize",value:function(){var t=void 0,e=this.options.yRange,i=this.options.yRange2,a=this.options.timeInfo;e&&(t=Object(R.e)(this,"options.yAxis.left"),this.yAxis=new T.a(n()({chart:this,position:"y",orient:"left",rangeScale:[this.chartHeight,0],domainScale:e},t)),this.chartComponentsArr.push(this.yAxis)),i&&(t=Object(R.e)(this,"options.yAxis.right"),this.yAxis2=new T.a(n()({chart:this,position:"y",orient:"right",rangeScale:[this.chartHeight,0],domainScale:i},t)),this.chartComponentsArr.push(this.yAxis2)),a.timeRange&&(t=Object(R.e)(this,"options.xAxis.bottom"),this.xAxis=new T.a(n()({chart:this,position:"x",orient:"bottom",rangeScale:[0,this.chartWidth],domainScale:a.timeRange},t)),this.chartComponentsArr.push(this.xAxis));var s=Object(R.e)(this,"options.tooltip");s.visible&&(this.tooltip=new D.a(n()({chart:this},s)),this.chartComponentsArr.push(this.tooltip)),this.options.series&&(this.series=new M({chart:this}),this.chartComponentsArr.push(this.series)),this.options.legend&&this.options.legend.visible&&(this.legends=new P.a({chart:this,legendPrefix:this.options.legend.legendPrefix,position:_.a.DIR_TOP,disableSeriesToggle:!0,onLegendChange:this.options.legend.onLegendChange}),this.chartComponentsArr.push(this.legends))}},{key:"draw",value:function(){console.log("BarSeriesChart draw",this),A()(e.prototype.__proto__||u()(e.prototype),"draw",this).call(this),this.options.afterDraw.call(this),this.reScaleYAxis(),this.chartResponsive(),this.mouseHandler&&this.mouseHandler.triggerMouseAction(),this.timeDiff=(new Date).getTime()-this.options.startTime.getTime(),this.options.onComplete.call(this,this.timeDiff)}},{key:"reScaleYAxis",value:function(t){var e=this,i=void 0,a=void 0,r=void 0,n=void 0,o=!0,h=!0;t===_.a.DIR_LEFT&&(h=!1),t===_.a.DIR_RIGHT&&(o=!1),n=Object(R.e)(this.options,"yAxis.left.max"),this.options.yRange&&o&&!s()(n)&&(i=this.yAxis.tickValues).length>1&&(a=i[0]-i[1],r=i[0]+a,this.options.yRange[1]=r,this.yAxis.modifyAxisProps({domainScale:this.options.yRange})),n=Object(R.e)(this.options,"yAxis.right.max"),this.options.yRange2&&h&&!s()(n)&&(i=this.yAxis2.tickValues).length>1&&(a=i[0]-i[1],r=i[0]+a,this.options.yRange2[1]=r,this.yAxis2.modifyAxisProps({domainScale:this.options.yRange2}));var c={},l=0;this.options.yRange&&(c[_.a.DIR_LEFT]={},c[_.a.DIR_LEFT].class=".vc-axis-left",c[_.a.DIR_LEFT].maxText=""),this.options.yRange2&&(c[_.a.DIR_RIGHT]={},c[_.a.DIR_RIGHT].class=".vc-axis-right",c[_.a.DIR_RIGHT].maxText="");var p=this.svg.append("g").attr("class","vc-axis"),u=function(t){e.container.select("svg "+c[t].class).selectAll("text").each((function(e){var i=Object(k.u)(this).text()||"";i.length>c[t].maxText.length&&(c[t].maxText=i)})),p.selectAll(".dummyText").data([c[t].maxText]).enter().append("text").text(String).each((function(t,e){l=this.getComputedTextLength()})),e.margin[t]=Math.round(l)+_.a.Y_AXIS_SPACE};for(var d in c)u(d);p.remove(),this.chartWidth=this.chartFullSpace.width-this.margin.left-this.margin.right,this.update()}}]),e}(S.a);e.default=V},80:function(t,e,i){"use strict";var a=i(79),s=i.n(a),r=i(5),n=i.n(r),o=i(6),h=i.n(o),c=i(4),l=i.n(c),p=i(7),u=i.n(p),d=i(8),x=i.n(d),f=i(9),v=i.n(f),m=i(12),b=i(1),g=function(t){function e(t){l()(this,e);var i=x()(this,(e.__proto__||h()(e)).call(this));return i.opts=n()({visible:!0},t),Object(b.j)(i.opts.format)||(i.opts.format=function(t){return"<span> ToolTip Text : </span><br/><span>"+s()(t)+"</span>"}),i}return v()(e,t),u()(e,[{key:"draw",value:function(){this.toolTipDiv=this.opts&&this.opts.chart.container.append("div").attr("class","vc-tooltip-display "+this.opts.className)}},{key:"hover",value:function(t,e,i,a){this.showHide(!0);var s=Object(b.b)(this.toolTipDiv),r=Object(b.b)(this.opts.chart.container),n=Math.round(t-r.left),o=Math.round(e-r.top);a||(n=Math.round(n-s.width/2),o=Math.round(o-s.height/2)),this.toolTipDiv.style("left",n+"px").style("top",o+"px").style("display","inline-block").html(this.opts.format.call(this.opts.chart,i.data))}},{key:"showHide",value:function(t){t=!!t,this.toolTipDiv&&this.toolTipDiv.classed("vc-hidden",!t)}},{key:"remove",value:function(){this.$toolTipDiv&&this.$toolTipDiv.remove(),this.opts=null}}]),e}(m.a);e.a=g}}]);
//# sourceMappingURL=barseries.min.js.map