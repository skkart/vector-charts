{"version":3,"sources":["webpack://vc/./data-parser/BasicPSParser.js","webpack://vc/./series/Pie.js","webpack://vc/./series/PieSeries.js","webpack://vc/./legend/PieSeriesLegend.js","webpack://vc/./charts/PieSeriesChart.js","webpack://vc/./d3Importer.js","webpack://vc/./charts/Chart.js","webpack://vc/./helpers.js","webpack://vc/./legend/TimeSeriesLegend.js","webpack://vc/./series/Series.js","webpack://vc/./tooltip/BasicTooltip.js"],"names":["BasicPSParser","opts","this","dataOptions","data","series","constructPlotInfo","err","console","log","onError","Error","pieData","pieseries","plotInfo","eachPlotSet","othersArc","name","value","color","pieObj","pie","total","arcs","values","sort","a","b","forEach","arcInfo","ind","pieArcCount","refineName","refineString","visible","unit","push","plotSet","chartData","ChartDataParser","Pie","className","donutPercent","positionPercentage","seriesOrder","piePosPercentage","constants","PIE_POS_DEFAULT","radius","Math","floor","min","chart","chartWidth","chartHeight","order","d","donutLength","tooltipHelper","arc","outerRadius","PIE_TOOLTIP_BUFFER","innerRadius","self","pieTag","graphZone","append","attr","arcZone","selectAll","enter","each","style","PIE_DARK_OPACITY","on","txtEle","select","textPos","elementOffset","tooltip","hover","left","top","PIE_DULL_OPACITY","PIE_ARC_STROKE","transition","delay","attrTween","i","interpolate","PIE_HOVER_BUFFER","t","hide","centroid","text","showFlag","classed","remove","ChartComponent","PieSeries","plotSeries","options","pieInfo","Series","PieSeriesLegend","maxWidthLegend","hasOverflow","eachPlotNames","textWidth","dummyG","svg","legendPrefix","thisWidth","round","getComputedTextLength","LEGEND_MAX_WIDTH","maxYLen","chartFullSpace","height","fullYLen","length","LEGEND_Y_SPACE","divWidth","LEGEND_SHOW_WIDTH","legendDiv","width","legendDisplay","pieforeignDiv","legendBlock","legendXDiv","update","chartZoneWidth","node","getBBox","basicWidth","margin","right","LEGEND_RIGHT_BUFFER","pieLegendPos","PIE_POS_LEGEND","legendXPos","xBuff","legendYPos","show","PieSeriesChart","container","startTime","Date","dataParser","addDefaultPSOptions","isObject","dataExecutor","chartInitilize","draw","tooltipOpts","getObject","Tooltip","chartComponentsArr","legend","document","implementation","hasFeature","legends","position","TimeSeriesLegend","afterDraw","call","chartResponsive","timeDiff","getTime","onComplete","Chart","isString","size","containerName","containerBox","takeContainerWidth","takeContainerHeight","maxWidth","minWidth","chartType","bottom","html","svgClass","isTouchScreen","counter","chartCmpt","showHide","chartResize","throttedResize","throttle","setTimeout","chartId","id","window","autoSizeChart","resizedGraphWidth","destroyFull","addDefaultChartOptions","chartCounter","format","DIR_TOP","isFunction","c","time","error","defaultValueFormat","val","decimals","denominator","kVal","getValueWithDecimals","mVal","addDefaultTSOptions","xAxis","UNITS_TIME","tickFormatter","timeInfo","timeLen","timeRange","xAxisFn","TIME_FORMAT_BUFFER","timeFormat","xDate","yAxis","UNITS_DEF","zoom","formatTime","isArray","zoneOffset","tableStr","dataIndex","key","isNaN","plotAxis","addDefaultBSOptions","dataArr","percentage","DIR_RIGHT","disableSeriesToggle","spacingNames","leng","maxLenLegend","ele","maxTextLength","graphOptions","toggleSeries","emptyFn","seriesName","visibleSeries","plotName","applyYAxis","currentPlotInfo","DIR_LEFT","constructYAxisInfo","modifyAxisProps","domainScale","yRange","yAxis2","yRange2","reScaleYAxis","redraw","sFlag","onLegendChange","LEGEND_SPACE","trailing","LEGEND_TEXT_X","LEGEND_TEXT_Y","legName","isPieLegend","substring","LEGEND_RECT_SIZE","horizontalLegendWidth","legendText","legendPos","VERT_POS_LEGEND","d3Svg","DATA_INTERVAL_BUFFER_X","plotFn","BasicTooltip","toolTipDiv","x","y","displayData","excludeToolTipDiv","box","rootPos","xpos","ypos","$toolTipDiv"],"mappings":"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","file":"pieseries.min.js","sourcesContent":["import {refineString} from '@/utils'\nimport ChartDataParser from '@/data-parser/ChartDataParser'\n\nexport default class BasicPSParser extends ChartDataParser {\n  constructor (opts) {\n    super(opts)\n    this.opts = opts\n  }\n\n  dataExecutor () {\n    // Order in which the DataProcessor APIs needs to be executed\n    try {\n\n      this.dataOptions = {}\n      this.opts.data && (this.dataOptions.data = this.opts.data)\n      this.opts.series && (this.dataOptions.series = this.opts.series)\n\n      Object.assign(this.dataOptions, this.constructPlotInfo())\n\n      return this.dataOptions\n\n    } catch (err) {\n      console.log('Error encountered while pieseries JSON parsing :', err)\n      this.opts.onError(err)\n      throw new Error('Invalid JSON received - Error on pieseries JSON parsing')\n    }\n  }\n\n  constructPlotInfo () {\n    const dataOptions = this.dataOptions\n    const resJson = dataOptions.data\n    const pieData = resJson.pieseries\n    const plotInfo = dataOptions.series\n    const eachPlotSet = {}\n    const othersArc = {\n      name: 'Others',\n      value: 0,\n      color: '#324fff'\n    }\n\n    // Create pieSet for each pie charts and arcInfo which contains each pie arcs to be drawn\n    const pieObj = plotInfo.pie\n    pieObj.total = 0\n    const arcs = []\n\n    // Find total value for entire pie chart\n    const allArcArr = pieData.values\n\n    allArcArr.sort(function (a, b) {\n      return (b.value - a.value)\n    }).forEach(function (arcInfo, ind) {\n      if (pieObj.pieArcCount && (ind + 1) >= pieObj.pieArcCount) {\n        // Add to others arc\n        othersArc.value += arcInfo.value\n      } else {\n        const refineName = refineString(arcInfo.name)\n        // arcInfo.name = refineName\n        eachPlotSet[refineName] = {}\n        eachPlotSet[refineName].name = arcInfo.name\n        eachPlotSet[refineName].color = arcInfo.color\n        eachPlotSet[refineName].value = arcInfo.value\n        eachPlotSet[refineName].visible = true\n        eachPlotSet[refineName].unit = pieObj.unit\n        arcs.push(arcInfo)\n      }\n      pieObj.total += arcInfo.value\n     \n    })\n    // Add others to arc\n    if (othersArc.value) {\n      const refineName = refineString(othersArc.name)\n      // othersArc.name = refineName\n      eachPlotSet[refineName] = {}\n      eachPlotSet[refineName].name = othersArc.name\n      eachPlotSet[refineName].color = othersArc.color\n      eachPlotSet[refineName].value = othersArc.value\n      eachPlotSet[refineName].visible = true\n      eachPlotSet[refineName].unit = pieObj.unit\n      arcs.push(othersArc)\n    }\n\n    return {\n      plotSet: eachPlotSet,\n      series: {\n        pie: pieObj\n      },\n      chartData: {\n        name: pieObj.name,\n        arcs\n      }\n    }\n  }\n}\n","import ChartComponent from '@/charts/ChartComponent'\nimport constants from '@/constants'\nimport {pie, arc, interpolate, select} from '@/d3Importer'\nimport {elementOffset} from '@/utils'\n\nexport default class Pie extends ChartComponent {\n  constructor (opts) {\n    super()\n    this.opts = Object.assign({\n      className: '',\n      pieData: null,\n      donutPercent: 100,\n      positionPercentage: null,\n      seriesOrder: true,\n      visible: true\n    }, opts)\n\n    this.opts.piePosPercentage = this.opts.positionPercentage || (constants.PIE_POS_DEFAULT / 100)\n    this.opts.radius = Math.floor(Math.min((this.opts.chart.chartWidth * this.opts.piePosPercentage), this.opts.chart.chartHeight) / 2)\n\n    // X Position of pie graph on the chart\n    this.pie = pie()\n\n    if (this.opts.seriesOrder) {\n      this.pie\n        .sort(function (a, b) {\n          return (b.order - a.order) // Sort based on each series order\n        })\n    }\n\n    this.pie\n      .value(function (d) {\n        return d.value // provide index of this series in data Arr\n      })\n\n\n    if (this.opts.donutPercent > 100 || this.opts.donutPercent < 0) {\n      this.opts.donutPercent = 100\n    }\n\n    this.opts.donutLength = Math.floor(this.opts.donutPercent * this.opts.radius / 100)\n\n    this.opts.tooltipHelper = arc()\n      .outerRadius(this.opts.radius + 2 * constants.PIE_TOOLTIP_BUFFER)\n      .innerRadius(this.opts.radius)\n\n    this.arc = arc()\n    // .outerRadius(this.opts.radius)\n      .innerRadius(this.opts.radius - this.opts.donutLength)\n  }\n\n  draw () {\n\n    const outerRadius = this.opts.radius\n    const arc = this.arc\n    const self = this\n    this.pieTag = this.opts.chart.graphZone.append('g')\n      .attr('class', 'vc-pie-plot vc-pie-' + this.opts.className)\n      .attr('transform', 'translate(' + Math.floor(this.opts.chart.chartWidth * this.opts.piePosPercentage / 2) + ',' + Math.floor(this.opts.chart.chartHeight / 2) + ')')\n\n    this.arcZone = this.pieTag.selectAll('.vc-pie-arc')\n      .data(this.pie(this.opts.pieData.arcs))\n      .enter().append('g')\n      .attr('class', 'vc-pie-arc')\n\n    this.arcZone.append('path')\n      .each(function (d) {\n        d.outerRadius = outerRadius\n      })\n      .attr('d', this.arc)\n      .attr('fill', function (d) {\n        return d.data.color\n      })\n      .style('opacity', constants.PIE_DARK_OPACITY)\n      .style('stroke-width', 0)\n      .on('mouseover', function (d, ind) {\n        // tooltip feature\n        const txtEle = self.arcZone.select(`.vc-tool-text_${ind}`)\n        const textPos = elementOffset(txtEle) // Find position of Arc respective tooltipHelper\n        self.opts.chart.tooltip && self.opts.chart.tooltip.hover(textPos.left, textPos.top, d)\n        // Dull all other Arcs\n        self.arcZone.selectAll('path')\n          .style('opacity', constants.PIE_DULL_OPACITY)\n        // Provide new radius and stroke-width\n        select(this)\n          .style('opacity', constants.PIE_DARK_OPACITY)\n          .style('stroke-width', constants.PIE_ARC_STROKE)\n          .transition().delay(10).attrTween('d', function (d) {\n            const i = interpolate(d.outerRadius, outerRadius + constants.PIE_HOVER_BUFFER)\n            return function (t) {\n              d.outerRadius = i(t)\n              return arc(d)\n            }\n          })\n      })\n      .on('mouseout', function (d) { // Hide tooltip\n        self.opts.chart.tooltip && self.opts.chart.tooltip.hide()\n        // Provide dark opacity to all arcs\n        self.arcZone.selectAll('path')\n          .style('opacity', constants.PIE_DARK_OPACITY)\n        // Revert back to its loaded radius\n        select(this)\n          .style('stroke-width', 0)\n          .transition().delay(150).attrTween('d', function (d) {\n            const i = interpolate(d.outerRadius, outerRadius)\n            return function (t) {\n              d.outerRadius = i(t)\n              return arc(d)\n            }\n          })\n      })\n\n    // Add tooltip-helper for each arc outside pie area\n    this.arcZone.append('text')\n      .attr('class', function (d, ind) {\n        return `vc-tool-text_${ind}`\n      })\n      .attr('transform', function (d) {\n        return 'translate(' + self.opts.tooltipHelper.centroid(d) + ')'\n      })\n      .style('visibility', 'hidden')\n      .text(function (d) {\n        return 'T'\n      })\n  }\n\n  update () {\n    const self = this\n    this.opts.radius = Math.floor(Math.min((this.opts.chart.chartWidth * this.opts.piePosPercentage), this.opts.chart.chartHeight) / 2)\n    this.pieTag.attr('transform', 'translate(' + Math.floor(this.opts.chart.chartWidth * this.opts.piePosPercentage / 2) + ',' + Math.floor(this.opts.chart.chartHeight / 2) + ')')\n    this.opts.donutLength = Math.floor(this.opts.donutPercent * this.opts.radius / 100)\n\n    this.arc\n      .outerRadius(this.opts.radius)\n      .innerRadius(this.opts.radius - this.opts.donutLength)\n\n    this.opts.tooltipHelper\n      .outerRadius(this.opts.radius + 2 * constants.PIE_TOOLTIP_BUFFER)\n      .innerRadius(this.opts.radius)\n\n    this.arcZone.select('path').attr('d', this.arc)\n    this.arcZone.select('text')\n      .attr('transform', function (d) {\n        return 'translate(' + self.opts.tooltipHelper.centroid(d) + ')'\n      })\n      .style('visibility', 'hidden')\n      .text(function (d) {\n        return 'T'\n      })\n  }\n\n  showHide (showFlag) {\n    showFlag = !!showFlag\n    this.pieTag.classed('vc-hidden', !showFlag)\n    this.opts.visible = showFlag\n  }\n\n  remove () {\n    this.arcZone && this.arcZone.remove()\n    this.pieTag && this.pieTag.remove()\n    this.opts.tooltipHelper = null\n    this.arc = null\n    this.pie = null\n    this.opts = null\n  }\n}","import Series from '@/series/Series'\nimport Pie from '@/series/Pie'\n\nexport default class PieSeries extends Series {\n  constructor (opts) {\n    super()\n    this.opts = opts\n    this.plotSeries = []\n    const data = this.opts.chart.options.chartData\n    const pieInfo = this.opts.chart.options.series.pie\n\n    this.plotSeries.push(new Pie({\n      chart: this.opts.chart,\n      className: pieInfo.className || pieInfo.name,\n      pieData: data,\n      donutPercent: pieInfo.donutPercent || 100,\n      visible: pieInfo.visible\n    }))\n  }\n\n}","import ChartComponent from '@/charts/ChartComponent'\nimport constants from '@/constants'\n\nexport default class PieSeriesLegend extends ChartComponent {\n  constructor (opts) {\n    super()\n    this.opts = opts\n    const self = this\n    this.opts.maxWidthLegend = 0\n    this.opts.hasOverflow = false\n    const graphOptions = this.opts.chart.options\n    const eachPlotSet = graphOptions.plotSet\n    const eachPlotNames = Object.keys(eachPlotSet)\n    const textWidth = []\n    const dummyG = this.opts.chart.svg.append('g')\n    // Add all name on DOM to calculate how much space is needed for every names\n    dummyG.selectAll('.dummyText')\n      .data(eachPlotNames)\n      .enter()\n      .append('text')\n      .attr('class', 'vc-legend-label')\n      .text(function (d) {\n        return (self.opts.legendPrefix + (eachPlotSet[d] ? eachPlotSet[d].name : ''))\n      })\n      .each(function (d, i) {\n        // Find size required for each legend on screen\n        const thisWidth = Math.round(this.getComputedTextLength())\n        if (thisWidth > self.opts.maxWidthLegend) {\n          self.opts.maxWidthLegend = thisWidth\n        }\n        textWidth.push(thisWidth)\n      })\n\n    dummyG.remove()\n\n    if (this.opts.maxWidthLegend > constants.LEGEND_MAX_WIDTH) {\n      this.opts.maxWidthLegend = constants.LEGEND_MAX_WIDTH\n    }\n\n  }\n\n  draw () {\n\n    const self = this\n    const graphOptions = this.opts.chart.options\n    const eachPlotSet = graphOptions.plotSet\n    const eachPlotNames = Object.keys(eachPlotSet)\n    const maxYLen = Math.floor(this.opts.chart.chartFullSpace.height * 90 / 100)\n    let fullYLen = eachPlotNames.length * constants.LEGEND_Y_SPACE\n    fullYLen = fullYLen > maxYLen ? maxYLen : fullYLen\n    const divWidth = this.opts.maxWidthLegend + constants.LEGEND_SHOW_WIDTH\n\n    this.opts.legendDiv = {\n      width: divWidth,\n      height: fullYLen\n    }\n\n    this.legendDisplay = this.opts.chart.svg.append('g')\n      .attr('class', 'vc-legend-group')\n\n    const pieforeignDiv = this.legendDisplay\n      .append('foreignObject')\n      .attr('width', divWidth)\n      .attr('height', fullYLen)\n      .attr('class', 'vc-legend-right')\n      .append('xhtml:div')\n      .attr('xmlns', 'http://www.w3.org/1999/xhtml')\n      .style('height', '100%')\n      .style('padding', '5px 0px')\n\n    if (fullYLen === maxYLen) {\n      // Add overflow to chart\n      pieforeignDiv\n        .style('overflow', 'auto')\n      this.opts.hasOverflow = true\n    }\n\n    this.legendBlock = pieforeignDiv\n      .selectAll('div')\n      .data(eachPlotNames)\n      .enter()\n      .append('div')\n      .attr('class', 'vc-legend-name')\n\n\n    this.legendBlock.append('span')\n      .style('background-color', function (d) {\n        return eachPlotSet[d].color\n      })\n\n    this.legendBlock.append('label')\n      .style('width', (divWidth - 40) + 'px')\n      .style('font-size', '11px')\n      .style('font-weight', '600')\n      .text(function (d) {\n        return (self.opts.legendPrefix + eachPlotSet[d].name)\n      })\n\n    this.legendXDiv = pieforeignDiv\n    this.update()\n\n  }\n\n  update () {\n    // Display in vertical order\n    const chartZoneWidth = this.opts.chart.graphZone.node().getBBox().width\n    const basicWidth = this.opts.maxWidthLegend + this.opts.chart.margin.left + this.opts.chart.margin.right + constants.LEGEND_RIGHT_BUFFER\n\n    let pieLegendPos = constants.PIE_POS_LEGEND\n    if (this.opts.maxWidthLegend === constants.LEGEND_MAX_WIDTH) {\n      pieLegendPos = constants.PIE_POS_LEGEND - 5\n    }\n\n    let legendXPos = Math.floor(this.opts.chart.chartWidth * pieLegendPos / 100)\n    let xBuff = this.opts.chart.chartWidth - legendXPos\n    xBuff = Math.floor((xBuff - this.opts.legendDiv.width) / 2)\n    legendXPos += xBuff\n\n    const legendYPos = Math.floor((this.opts.chart.chartFullSpace.height - this.opts.legendDiv.height) / 2)\n\n    if (!this.opts.hasOverflow) {\n      this.legendDisplay\n        .attr('transform', 'translate(' + legendXPos + ',' + legendYPos + ')')\n    } else {\n      this.legendXDiv\n        .style('position', 'relative')\n        .style('top', legendYPos + 'px')\n        .style('left', legendXPos + 'px')\n    }\n\n    if (this.opts.chart.chartWidth < (basicWidth + chartZoneWidth)) {\n      // Hide legend display for pielegends\n      this.hide()\n    } else {\n      this.show()\n    }\n\n  }\n\n  showHide (showFlag) {\n    showFlag = !!showFlag\n    this.opts.visible = showFlag\n    this.legendDisplay && this.legendDisplay.classed('vc-hidden', !showFlag)\n  }\n\n  remove () {\n    this.legendBlock && this.legendBlock.remove()\n    this.legendDisplay && this.legendDisplay.remove()\n    this.opts = null\n  }\n}","import {getObject, isObject} from '@/utils'\nimport Chart from '@/charts/Chart'\nimport {addDefaultPSOptions} from '@/helpers'\nimport Tooltip from '@/tooltip/BasicTooltip'\nimport BasicPSParser from '@/data-parser/BasicPSParser'\nimport ChartDataParser from '@/data-parser/ChartDataParser'\nimport PieSeries from '@/series/PieSeries'\nimport PieSeriesLegend from '@/legend/PieSeriesLegend'\nimport TimeSeriesLegend from '@/legend/TimeSeriesLegend'\n\nexport default class PieSeriesChart extends Chart {\n  constructor (container, opts) {\n    opts.startTime = new Date()\n\n    // Create the dataParser is not passed\n    if (!opts.dataParser) {\n      opts.dataParser = new BasicPSParser(opts)\n    }\n    // Check the dataParser exists and its instanceof ChartDataParser\n    if (!(opts.dataParser instanceof ChartDataParser)) {\n      throw new Error(\"DataParser in options dosen't have implementation of ChartDataParser\")\n    }\n\n    // Call Parent Impl\n    super(container, opts)\n\n    // Add default options to chart\n    addDefaultPSOptions(this.options)\n\n    // Run the dataParser for given JSON data\n    if (isObject(this.dataParser)) {\n      Object.assign(this.options, this.dataParser.dataExecutor())\n    }\n\n    // Initilize all chart components needed for timeSeriesChart on exact order based on each dependencies\n    this.chartInitilize()\n\n    setImmediate(() => this.draw())\n  }\n\n  chartInitilize () {\n\n    const tooltipOpts = getObject(this, 'options.tooltip')\n    if (tooltipOpts.visible) {\n      this.tooltip = new Tooltip({\n        chart: this,\n        ...tooltipOpts\n      })\n      this.chartComponentsArr.push(this.tooltip)\n    }\n\n    if (this.options.series) {\n      this.series = new PieSeries({\n        chart: this\n      })\n      // Register the component for draw, update, showHide and remove\n      this.chartComponentsArr.push(this.series)\n    }\n\n    if (this.options.legend.visible) {\n      // IF browser supports foreignObject use pieLegends API\n      if (document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Extensibility', '1.1')) {\n        this.legends = new PieSeriesLegend({\n          chart: this,\n          legendPrefix: this.options.legend.legendPrefix,\n          position: this.options.legend.position\n        })\n      } else {\n        this.legends = new TimeSeriesLegend({\n          chart: this,\n          legendPrefix: this.options.legend.legendPrefix,\n          position: this.options.legend.position\n        })\n      }\n\n      this.chartComponentsArr.push(this.legends)\n    }\n  }\n\n  draw () {\n    console.log('PieSeriesChart draw', this)\n    super.draw()\n    this.options.afterDraw.call(this)\n\n    this.chartResponsive()\n\n    this.timeDiff = (new Date()\n      .getTime() - this.options.startTime.getTime())\n    this.options.onComplete.call(this, this.timeDiff)\n  }\n\n}\n","// import * as zoom from 'd3-zoom'\n\nexport {\n  scaleBand,\n  scaleLinear,\n  scaleTime\n} from 'd3-scale'\n\nexport {\n  axisBottom,\n  axisTop,\n  axisLeft,\n  axisRight\n} from 'd3-axis'\n\nexport {timeFormat} from 'd3-time-format'\n\nexport {interpolate} from 'd3-interpolate'\n\nexport {\n  select,\n  selectAll,\n  mouse as d3Mouse,\n  event as d3Event,\n  touch as d3Touch,\n  touches as d3Touches\n} from 'd3-selection'\n\nexport {\n  range,\n  max,\n  transpose,\n  bisector\n} from 'd3-array'\n\nexport {brushX, brushY} from 'd3-brush'\n\nexport {\n  line, stack, area,\n  stackOrderNone, stackOffsetNone,\n  pie, arc\n} from 'd3-shape'\n\nexport {zoom, zoomTransform} from 'd3-zoom'\n\nexport default {\n  version: 'v5'\n}\n","import {elementOffset, isObject, isString, throttle} from '@/utils'\nimport {select} from '@/d3Importer'\nimport ChartComponent from '@/charts/ChartComponent'\n\nexport default class Chart extends ChartComponent {\n  constructor (container, opts) {\n    super()\n    if (isString(container) && isObject(opts) && container.length && isObject(opts.dataParser)) {\n      this.container = select(container)\n      if (!this.container.size()) {\n        throw new Error('The graph container spectifed in options doesnt exist inside in Document Body')\n      }\n      opts.containerName = container\n\n      const containerBox = elementOffset(this.container)\n\n      let takeContainerWidth = false\n      if (!Number.isFinite(opts.chart.width)) {\n        opts.chart.width = containerBox.width\n        takeContainerWidth = true\n      }\n\n      let takeContainerHeight = false\n      if (!Number.isFinite(opts.chart.height)) {\n        opts.chart.height = containerBox.height\n        takeContainerHeight = true\n      }\n\n      if (opts.chart.width > opts.chart.maxWidth) {\n        opts.chart.width = opts.chart.maxWidth\n      }\n\n      if (opts.chart.width < opts.chart.minWidth) {\n        opts.chart.width = opts.chart.minWidth\n      }\n\n      this.options = opts\n\n      this.chartHeight = opts.chart.height\n      this.chartWidth = opts.chart.width\n      this.margin = opts.chart.margin\n      this.chartType = opts.chart.chartType\n\n      if (takeContainerWidth) {\n        this.chartWidth = this.chartWidth - (this.margin.left + this.margin.right)\n      }\n\n      if (takeContainerHeight) {\n        this.chartHeight = this.chartHeight - (this.margin.top + this.margin.bottom)\n      }\n\n      // Attach dataProcess to chart, which generate chartData and plot Info based on JSON and options\n      this.dataParser = opts.dataParser\n\n      // Delete dataProcess from options\n      delete this.options.dataParser\n\n      this.chartFullSpace = {\n        width: this.chartWidth + this.margin.left + this.margin.right,\n        height: this.chartHeight + this.margin.top + this.margin.bottom,\n      }\n\n\n      // Array which holds all the chartComponents required for the graph like axis, series, tooltip, legend etc\n      this.chartComponentsArr = []\n\n      this.svg = this.container.select('svg')\n\n      if (this.svg.size() === 0) {\n        // Create svg element if not exist inside chart container DIV\n        this.svg = this.container.append('svg')\n      }\n\n      // Clear svg if it has needless content\n      this.svg.html('')\n\n      let svgClass = 'vc-svg ' + opts.chart.className\n      if (this.options.chart.isTouchScreen) {\n        svgClass += ' vc-noselect'\n      }\n      this.svg\n        .attr('width', this.chartFullSpace.width)\n        .attr('height', this.chartFullSpace.height)\n        .attr('class', svgClass)\n\n\n      // Add defs to show plot series within the def specified width and height\n      this.svg.append('defs')\n        .append('clipPath')\n        .attr('id', `chart_clip_${this.options.chart.counter}`)\n        .append('rect')\n        .attr('width', this.chartWidth)\n        .attr('height', this.chartHeight)\n\n      // Add graphZone tag, so that all series and axis are grouped together\n      this.graphZone = this.svg.append('g')\n        .attr('transform', 'translate(' + this.margin.left + ',' + this.margin.top + ')')\n        .attr('class', 'vc-graphZone')\n    }\n  }\n\n  draw () {\n    console.log('Chart draw', this)\n    // Draw all the chartComponents in the same order of there initilization using chartComponentsArr\n    this.chartComponentsArr.forEach(function (chartCmpt) {\n      if (chartCmpt instanceof ChartComponent) {\n        chartCmpt.draw()\n      }\n    })\n  }\n\n  update () {\n    this.svg.attr('width', this.chartFullSpace.width)\n    this.graphZone.attr('transform', 'translate(' + this.margin.left + ',' + this.margin.top + ')')\n    this.svg.select('clipPath').select('rect').attr('width', this.chartWidth)\n\n    console.log('Chart update', this)\n    // Update all chart component based on new width changes\n    this.chartComponentsArr.forEach(function (chartCmpt) {\n      if (chartCmpt instanceof ChartComponent) {\n        chartCmpt.update()\n      }\n    })\n  }\n\n  showHide (showFlag) {\n    console.log('Chart showHide', this)\n    showFlag = !!showFlag // Convert any type to boolean\n    this.chartComponentsArr.forEach(function (chartCmpt) {\n      if (chartCmpt instanceof ChartComponent) {\n        chartCmpt.showHide(showFlag)\n      }\n    })\n  }\n\n  remove () {\n    console.log('Chart remove', this)\n    this.chartComponentsArr.forEach(function (chartCmpt) {\n      if (chartCmpt instanceof ChartComponent) {\n        chartCmpt.remove()\n      }\n    })\n  }\n\n  // chartResponsive based on screen resize is handled\n  chartResponsive () {\n    if (this.options.chart.chartResize) {\n      this.throttedResize = throttle((width, height) => {\n        if (width === this.chartFullSpace.width) {\n          return // Dont resize if graph is already adjusted\n        }\n        this.chartFullSpace.width = Math.floor(width)\n        this.chartFullSpace.height = Math.floor(height)\n        this.chartWidth = this.chartFullSpace.width - (this.margin.left + this.margin.right)\n        this.chartHeight = this.chartFullSpace.height - (this.margin.top + this.margin.bottom)\n        setTimeout(() => this.update(), 0)\n      }, 450) // 'this' Will have reference of timeSeriesChart or pieSeriesChart\n\n      // Add resize for each chart based on chart ID namespace\n      const chartId = 'vc-' + (this.options.chart.id || this.options.chart.counter)\n      select(window).on('resize.' + chartId, () => this.autoSizeChart())\n\n    }\n  }\n\n  autoSizeChart () {\n    const containerBox = elementOffset(this.container)\n    let resizedGraphWidth = containerBox.width\n\n    if (resizedGraphWidth > this.options.chart.maxWidth) {\n      resizedGraphWidth = this.options.chart.maxWidth\n    }\n\n    if (resizedGraphWidth < this.options.chart.minWidth) {\n      resizedGraphWidth = this.options.chart.minWidth\n    }\n\n    this.throttedResize(resizedGraphWidth, containerBox.height)\n  }\n\n  // Destroy all chart properties and components\n  destroy (destroyFull) {\n    destroyFull = !!destroyFull\n    // Remove resize hander on window for vcChart namespace\n    if (this.options.chart.chartResize) {\n      const chartId = 'vc-' + (this.options.chart.id || this.options.chart.counter)\n      select(window).on('resize.' + chartId, null)\n    }\n\n    // Remove all chartComponents (timeSeriesChart or pieSeriesChart)\n    this.remove()\n\n    // Remove svg and container if destroyFull is true\n    destroyFull && this.svg.remove()\n    destroyFull && this.container.remove()\n\n    return null\n  }\n}\n","import constants from '@/constants'\nimport {chartCounter, getValueWithDecimals, isArray, isFunction} from '@/utils'\nimport {timeFormat} from '@/d3Importer'\n\nexport function addDefaultChartOptions (opts) {\n\n  opts.chart = Object.assign({\n    chartResize: false,\n    isTouchScreen: false,\n    className: '',\n    maxWidth: Number.MAX_SAFE_INTEGER,\n    minWidth: 0\n  }, opts.chart)\n  opts.chart.counter = chartCounter()\n\n  opts.tooltip = Object.assign({\n    visible: true,\n    format: false // Use aryakaCharts internal tooltip formatter to show raw data\n  }, (opts.tooltip || {}))\n\n  opts.legend = Object.assign({\n    visible: true,\n    legendPrefix: '',\n    position: constants.DIR_TOP\n  }, (opts.legend || {}))\n\n  if (!isFunction(opts.afterDraw)) {\n    opts.afterDraw = function (c) {\n      return c\n    }\n  }\n\n  if (!isFunction(opts.onComplete)) {\n    opts.onComplete = function (time) {\n      console.log(`Chart loading of ${opts.containerName} is completed in ${time} ms`)\n    }\n  }\n\n  if (!isFunction(opts.onError)) {\n    opts.onError = function (error) {\n      console.log(`Chart has encountered error of ${opts.containerName} `, error)\n    }\n  }\n\n  return opts\n}\n\nexport function defaultValueFormat (val, unit = '', decimals = 3) {\n  const denominator = 1000\n  if (val > denominator) {\n    const kVal = getValueWithDecimals(val / denominator, decimals)\n    if (kVal > denominator) {\n      const mVal = getValueWithDecimals(kVal / denominator, decimals)\n      return `${mVal}M ${unit}`\n    }\n    return `${kVal}K ${unit}`\n  }\n  return `${getValueWithDecimals(val, decimals)} ${unit}`\n}\n\n\nexport function addDefaultTSOptions (opts) {\n  // Add defaults to xAxis\n  opts.xAxis = Object.assign({\n    bottom: {\n      unit: constants.UNITS_TIME,\n      visible: true\n    }\n  }, (opts.xAxis || {}))\n\n  if (!isFunction(opts.xAxis.bottom.tickFormatter)) {\n    const timeInfo = opts.timeInfo\n    // If the date range is less than 2 days, Show in hour format\n    const timeLen = timeInfo.timeRange.length\n    const dateDiff = timeInfo.timeRange[timeLen - 1] - timeInfo.timeRange[0]\n\n    const xAxisFn = (dateDiff < constants.TIME_FORMAT_BUFFER) ? timeFormat('%H:%M') : timeFormat('%d %b %Y')\n    opts.xAxis.bottom.tickFormatter = (xDate) => {\n      return xAxisFn(xDate)\n    }\n  }\n\n  // If yAxis is not specified, then default is left and its value axis with unit\n  if (!opts.yAxis) {\n    opts.yAxis = {\n      left: {}\n    }\n  }\n\n  if (opts.yAxis.left) {\n    opts.yAxis.left = Object.assign({\n      unit: constants.UNITS_DEF,\n      min: 0, // Start plotting Y Axis from 0\n      visible: true\n    }, opts.yAxis.left)\n  }\n\n  if (opts.yAxis.right) {\n    opts.yAxis.right = Object.assign({\n      unit: constants.UNITS_DEF,\n      min: 0, // Start plotting Y Axis from 0\n      visible: true\n    }, opts.yAxis.right)\n  }\n\n  opts.zoom = Object.assign({\n    visible: false\n  }, (opts.zoom || {}))\n\n  // General Options to both chartType\n  opts.tooltip = Object.assign({\n    visible: true,\n    format: false // Use aryakaCharts internal tooltip formatter to show raw data\n  }, (opts.tooltip || {}))\n\n  if (!isFunction(opts.tooltip.format)) {\n    const formatTime = timeFormat('%d %b %Y  %H:%M:%S')\n    opts.tooltip.format = function (d) {\n      if (!d || !isArray(d)) {\n        return ''\n      }\n      const plotSet = this.options.plotSet\n      const timeInfo = this.options.timeInfo\n      const zoneOffset = this.options.xAxis.zoneOffset || ''\n      const yAxis = this.options.yAxis\n\n      let tableStr = `<table><tbody><tr>\n            <td class=\"value_full\" colspan=\"2\">\n            ${formatTime(d[timeInfo.dataIndex])} ${zoneOffset}\n            </td></tr>`\n\n      for (const key in plotSet) {\n        const val = d[plotSet[key].dataIndex]\n        if (!plotSet[key].visible || isNaN(val)) {\n          continue\n        }\n\n        // Find Y Axis format is preset\n        const yOrient = yAxis[plotSet[key].plotAxis[0]]\n        const format = yOrient.format || defaultValueFormat\n\n        tableStr += `<tr>\n        <td class='name'>\n            <span style='background-color:${plotSet[key].color}'></span>${plotSet[key].name}\n        </td>\n        <td class='value'>\n            ${format(val, plotSet[key].unit)}\n        </td>\n        </tr>`\n      }\n\n      tableStr += '</tbody></table>'\n\n      return tableStr\n    }\n  }\n\n  addDefaultChartOptions(opts)\n\n  return opts\n}\n\nexport function addDefaultBSOptions (opts) {\n  // Add defaults to xAxis\n  opts.xAxis = Object.assign({\n    bottom: {\n      unit: constants.UNITS_DEF,\n      visible: true\n    }\n  }, (opts.xAxis || {}))\n\n\n  // If yAxis is not specified, then default is left and its value axis with unit\n  if (!opts.yAxis) {\n    opts.yAxis = {\n      left: {}\n    }\n  }\n\n  if (opts.yAxis.left) {\n    opts.yAxis.left = Object.assign({\n      unit: constants.UNITS_DEF,\n      min: 0, // Start plotting Y Axis from 0\n      visible: true\n    }, opts.yAxis.left)\n  }\n\n  if (opts.yAxis.right) {\n    opts.yAxis.right = Object.assign({\n      unit: constants.UNITS_DEF,\n      min: 0, // Start plotting Y Axis from 0\n      visible: true\n    }, opts.yAxis.right)\n  }\n\n  opts.zoom = Object.assign({\n    visible: false\n  }, (opts.zoom || {}))\n\n\n  // General Options to both chartType\n  opts.tooltip = Object.assign({\n    visible: true,\n    format: false // Use aryakaCharts internal tooltip formatter to show raw data\n  }, (opts.tooltip || {}))\n\n  if (!isFunction(opts.tooltip.format)) {\n    opts.tooltip.format = function (d) {\n      let dataArr = d\n      if (d && d.val) {\n        dataArr = d.val\n      }\n      if (!isArray(dataArr)) {\n        return ''\n      }\n      const plotSet = this.options.plotSet\n      const timeInfo = this.options.timeInfo\n      const yAxis = this.options.yAxis\n\n      let tableStr = `<table><tbody><tr>\n            <td class=\"value_full\" colspan=\"2\">\n            ${dataArr[timeInfo.dataIndex]}\n            </td></tr>`\n\n      for (const key in plotSet) {\n        const val = dataArr[plotSet[key].dataIndex]\n        if (!plotSet[key].visible || isNaN(val)) {\n          continue\n        }\n\n        // Find Y Axis format is preset\n        const yOrient = yAxis[plotSet[key].plotAxis[0]]\n        const format = yOrient.format || defaultValueFormat\n\n        tableStr += `<tr>\n        <td class='name'>\n            <span style='background-color:${plotSet[key].color}'></span>\n        </td>\n        <td class='value'>\n            ${format(val, plotSet[key].unit)}\n        </td>\n        </tr>`\n      }\n\n      tableStr += '</tbody></table>'\n\n      return tableStr\n    }\n  }\n\n  addDefaultChartOptions(opts)\n\n  return opts\n}\n\nexport function addDefaultPSOptions (opts) {\n\n  // General Options to both chartType\n  opts.tooltip = Object.assign({\n    visible: true,\n    format: false // Use aryakaCharts internal tooltip formatter to show raw data\n  }, (opts.tooltip || {}))\n\n  if (!isFunction(opts.tooltip.format)) {\n    opts.tooltip.format = function (d) {\n      if (!d || !d.value) {\n        return ''\n      }\n      const pieObj = this.options.series.pie\n      const format = pieObj.format || defaultValueFormat\n      const percentage = getValueWithDecimals((d.value / pieObj.total) * 100, 1)\n\n      return `<table style='opacity: 0.8;'>\n              <tbody>\n              <tr>\n              <td class='name'><span style='background-color:${d.color}'></span>${d.name}</td>\n              <td class='value'>${percentage} %</td>\n              </tr>\n              <tr>\n              <td class='value' colspan='2'>${format(d.value, pieObj.unit)}</td>\n              </tr>\n              </tbody>\n              </table>`\n    }\n  }\n\n  addDefaultChartOptions(opts)\n\n  opts.legend.position = constants.DIR_RIGHT\n\n  return opts\n}","import ChartComponent from '@/charts/ChartComponent'\nimport constants from '@/constants'\nimport {emptyFn, isFunction, throttle} from '@/utils'\nimport {select} from '@/d3Importer'\n\nexport default class TimeSeriesLegend extends ChartComponent {\n  constructor (opts) {\n    super()\n    this.opts = Object.assign({\n      disableSeriesToggle: false\n    }, opts)\n\n    const self = this\n    this.opts.maxWidthLegend = 0\n    this.opts.spacingNames = []\n\n\n    const graphOptions = this.opts.chart.options\n    const eachPlotSet = graphOptions.plotSet\n    const eachPlotNames = Object.keys(eachPlotSet)\n    let leng = 0\n    const textWidth = []\n    let maxLenLegend\n\n    const dummyG = this.opts.chart.svg.append('g')\n    // Add all name on DOM to calculate how much space is needed for every names\n    dummyG.selectAll('.dummyText')\n      .data(eachPlotNames)\n      .enter()\n      .append('text')\n      .attr('class', 'vc-legend-label')\n      .style('font-size', '11px')\n      .style('font-weight', '500')\n      .text(function (d) {\n        return (self.opts.legendPrefix + (eachPlotSet[d] ? eachPlotSet[d].name : ''))\n      })\n      .each(function (d, i) {\n        // Find size required for each legend on screen\n        const thisWidth = Math.round(this.getComputedTextLength())\n        if (thisWidth > self.opts.maxWidthLegend) {\n          self.opts.maxWidthLegend = thisWidth\n          maxLenLegend = d\n        }\n        textWidth.push(thisWidth)\n      })\n\n    // Fill the spacing Arr having position for each legends on horizontal order\n    textWidth.forEach(function (ele) {\n      leng += ele\n      self.opts.spacingNames.push(leng)\n    })\n\n    // Make maxTextLength Higher to show full text for pie legends\n    this.opts.maxTextLength = maxLenLegend.length + 100\n\n    dummyG.remove()\n  }\n\n  draw () {\n\n    const self = this\n    const graphOptions = this.opts.chart.options\n    let toggleSeries = emptyFn\n    const eachPlotSet = graphOptions.plotSet\n    const eachPlotNames = Object.keys(eachPlotSet)\n    const maxYLen = Math.floor(this.opts.chart.chartFullSpace.height * 90 / 100)\n    let fullYLen = eachPlotNames.length * constants.LEGEND_Y_SPACE\n    fullYLen = fullYLen > maxYLen ? maxYLen : fullYLen\n    const divWidth = this.opts.maxWidthLegend + constants.LEGEND_SHOW_WIDTH\n\n    this.opts.legendDiv = {\n      width: divWidth,\n      height: fullYLen\n    }\n\n\n    // Perfom Series show and hide on click of each legend\n    if (!this.opts.disableSeriesToggle) {\n\n      toggleSeries = function (seriesName) {\n        let visibleSeries = 0\n        let plotName\n\n        if (eachPlotSet[seriesName] && eachPlotSet[seriesName].visible) {\n          // If the series is getting disabled and its only one series visible, Dont disable it.\n          for (plotName in eachPlotSet) {\n            eachPlotSet[plotName].visible && visibleSeries++\n          }\n\n          if (visibleSeries <= 1) {\n            return\n          }\n        }\n\n        let applyYAxis\n\n        // plotSeries that is getting toggled\n        let currentPlotInfo\n\n        if (eachPlotSet && eachPlotSet[seriesName]) {\n          currentPlotInfo = eachPlotSet\n        }\n\n\n        if (currentPlotInfo) {\n\n          currentPlotInfo[seriesName].visible = !currentPlotInfo[seriesName].visible\n\n          if (currentPlotInfo[seriesName].plotAxis[0] === constants.DIR_LEFT) {\n\n            // This will compute max and min value for YAxis based on series which are visible\n            Object.assign(self.opts.chart.options, self.opts.chart.dataParser.constructYAxisInfo())\n\n            applyYAxis = constants.DIR_LEFT\n            // Update Y Axis with new domainScale\n            self.opts.chart.yAxis.modifyAxisProps({\n              domainScale: graphOptions.yRange\n            })\n\n          } else if (currentPlotInfo[seriesName].plotAxis[0] === constants.DIR_RIGHT) {\n\n            // This will compute max and min value for YAxis based on series which are visible\n            Object.assign(self.opts.chart.options, self.opts.chart.dataParser.constructYAxisInfo())\n\n            applyYAxis = constants.DIR_RIGHT\n            // Update Y Axis with new domainScale\n            self.opts.chart.yAxis2.modifyAxisProps({\n              domainScale: graphOptions.yRange2\n            })\n          }\n\n          // Adjust YAxis tick value display based on yAxis change\n          self.opts.chart.reScaleYAxis(applyYAxis)\n\n          // Redraw all plot components based on yAxis change\n          self.opts.chart.series.redraw()\n\n          const sFlag = currentPlotInfo[seriesName].visible\n\n          select(this)\n            .classed('vc-fill-hidden', !sFlag)\n\n          isFunction(self.opts.onLegendChange) && self.opts.onLegendChange.call(self.opts.chart, currentPlotInfo[seriesName], sFlag)\n        }\n\n      }\n    }\n\n    this.legendDisplay = this.opts.chart.svg.append('g')\n      .attr('class', 'vc-legend-group')\n      .attr('transform', 'translate(15, 5)')\n\n    this.legendBlock = this.legendDisplay\n      .selectAll('g')\n      .data(eachPlotNames)\n      .enter()\n      .append('g')\n      .attr('transform', function (d, i) {\n        // Provide horizontal position based on order\n        if (self.opts.position === constants.DIR_TOP) {\n          const x = self.opts.spacingNames[i - 1] ? (self.opts.spacingNames[i - 1] + constants.LEGEND_SPACE * i) : 0\n          return 'translate(' + x + ', 0)'\n        } else if (self.opts.position === constants.DIR_RIGHT) {\n          // Provide vertical position based on order\n          const y = i * constants.LEGEND_Y_SPACE\n          return 'translate(0 ,' + y + ')'\n        }\n      })\n      .attr('class', function (d) {\n        return 'vc-legend vc-legend-' + d\n      })\n      .classed('vc-fill-hidden', function (d, i) {\n        return (eachPlotSet[d] ? !eachPlotSet[d].visible : false)\n      })\n\n    // Listen to click event only for timeseries legends\n    this.legendBlock\n      .on('click', throttle(toggleSeries, 300, { // Sometimes toggle event is called multiple times, hence block by adding throttle\n        trailing: false\n      }))\n\n\n    this.legendBlock.append('text')\n      .attr('class', 'vc-legend-label')\n      .attr('x', constants.LEGEND_TEXT_X)\n      .attr('y', constants.LEGEND_TEXT_Y)\n      .style('font-size', '11px')\n      .style('font-weight', '500')\n      .text(function (d) {\n        let legName = (self.opts.legendPrefix + (eachPlotSet[d] ? eachPlotSet[d].name : ''))\n        if (self.opts.isPieLegend && self.opts.maxTextLength < legName.length) {\n          legName = legName.substring(0, self.opts.maxTextLength) + '...'\n        }\n        return legName\n      })\n\n\n    this.legendBlock.append('rect')\n      .attr('class', 'vc-legend-box')\n      .attr('x', 0)\n      .attr('width', constants.LEGEND_RECT_SIZE)\n      .attr('height', constants.LEGEND_RECT_SIZE)\n      .style('stroke', function (d) {\n        return eachPlotSet[d] ? eachPlotSet[d].color : ''\n      })\n      .style('stroke-width', '2px')\n      .style('fill', function (d) {\n        return eachPlotSet[d] ? eachPlotSet[d].color : ''\n      })\n\n    this.opts.horizontalLegendWidth = Math.round(this.legendDisplay.node()\n      .getBBox()\n      .width)\n\n    this.update()\n\n  }\n\n  update () {\n    // Display in vertical order\n    const self = this\n    const legendText = this.opts.chart.container.selectAll('svg .vc-legend-label')\n    let basicWidth = this.opts.maxWidthLegend + this.opts.chart.margin.left + this.opts.chart.margin.right\n\n    if (this.opts.position === constants.DIR_RIGHT) {\n      // Display legends vertically on right side\n      basicWidth += constants.LEGEND_SHOW_WIDTH\n      let legendPos = constants.VERT_POS_LEGEND\n      if (this.opts.maxWidthLegend === constants.LEGEND_MAX_WIDTH) {\n        legendPos = constants.VERT_POS_LEGEND + 10\n      }\n      let legendXPos = Math.floor(this.opts.chart.chartWidth * legendPos / 100)\n      let xBuff = this.opts.chart.chartWidth - legendXPos\n      xBuff = Math.floor((xBuff - this.opts.legendDiv.width) / 2)\n      legendXPos += xBuff\n\n      const legendYPos = Math.floor((this.opts.chart.chartFullSpace.height - this.opts.legendDiv.height) / 2)\n\n      this.legendDisplay\n        .attr('transform', 'translate(' + legendXPos + ',' + legendYPos + ')')\n\n    }\n\n    const d3Svg = this.opts.chart.svg\n\n    if (this.opts.position === constants.DIR_TOP) {\n      basicWidth = constants.LEGEND_SPACE * self.opts.spacingNames.length + constants.DATA_INTERVAL_BUFFER_X\n\n      if ((this.opts.horizontalLegendWidth + constants.LEGEND_RIGHT_BUFFER) > self.opts.chart.chartWidth) {\n        // Hide only text and display Color box with tooltip\n        d3Svg.selectAll('.vc-legend')\n          .each(function () {\n            const seriesName = select(this).select('text').html()\n            select(this).select('rect')\n              .html('')\n              .append('svg:title')\n              .text(seriesName)\n          })\n        legendText.classed('vc-hidden', true)\n\n        if (self.opts.chart.chartWidth < basicWidth) {\n          // display box vertically\n          this.legendBlock\n            .attr('transform', function (d, i) {\n              const y = i * constants.LEGEND_Y_SPACE\n              return 'translate(0,' + y + ')'\n            })\n        } else {\n          // Display only box on top\n          this.legendBlock\n            .attr('transform', function (d, i) {\n              const x = constants.LEGEND_SPACE * i\n              return 'translate(' + x + ', 0)'\n            })\n        }\n      } else {\n        // Display legend on top with both text, box and remove tooltip\n        this.legendBlock\n          .attr('transform', function (d, i) {\n            const x = self.opts.spacingNames[i - 1] ? (self.opts.spacingNames[i - 1] + constants.LEGEND_SPACE * i) : 0\n            return 'translate(' + x + ', 0)'\n          })\n\n        if (!this.opts.isPieLegend) {\n          d3Svg.selectAll('.vc-legend')\n            .each(function () {\n              select(this).select('rect')\n                .html('')\n            })\n          legendText.classed('vc-hidden', false)\n        }\n      }\n    }\n\n  }\n\n  showHide (showFlag) {\n    showFlag = !!showFlag\n    this.opts.visible = showFlag\n    this.legendDisplay && this.legendDisplay.classed('vc-hidden', !showFlag)\n  }\n\n  remove () {\n    this.legendBlock && this.legendBlock.remove()\n    this.legendDisplay && this.legendDisplay.remove()\n    this.opts = null\n  }\n}","import ChartComponent from '@/charts/ChartComponent'\n\nexport default class Series extends ChartComponent {\n  constructor (opts) {\n    super()\n  }\n\n  draw () {\n    this.plotSeries.forEach(function (plotFn) {\n      plotFn.draw()\n    })\n  }\n\n  update () {\n    this.plotSeries.forEach(function (plotFn) {\n      plotFn.update()\n    })\n  }\n\n  showHide (showFlag) {\n    this.plotSeries.forEach(function (plotFn) {\n      plotFn.showHide(showFlag)\n    })\n  }\n\n  // Redraw is called when series is toggled from Legends\n  redraw () {\n    this.plotSeries.forEach(function (plotFn) {\n      plotFn.redraw()\n    })\n  }\n\n  remove () {\n    this.plotSeries.forEach(function (plotFn) {\n      plotFn.remove()\n    })\n    this.plotSeries = null\n    this.opts = null\n  }\n\n}","import ChartComponent from '@/charts/ChartComponent'\nimport {elementOffset, isFunction} from '@/utils'\n\nexport default class BasicTooltip extends ChartComponent {\n  constructor (opts) {\n    super()\n    this.opts = Object.assign({\n      visible: true\n    }, opts)\n\n    // Provide basic formatter to display hover data\n    if (!isFunction(this.opts.format)) {\n      this.opts.format = function (d) {\n        return `<span> ToolTip Text : </span><br/><span>${JSON.stringify(d)}</span>`\n      }\n    }\n  }\n\n  draw () {\n    this.toolTipDiv = this.opts && this.opts.chart.container\n      .append('div')\n      .attr('class', 'vc-tooltip-display ' + this.opts.className)\n  }\n\n  hover (x, y, displayData, excludeToolTipDiv) {\n    this.showHide(true)\n    // This will be called by series -- bar / pie\n    const box = elementOffset(this.toolTipDiv)\n    const rootPos = elementOffset(this.opts.chart.container)\n    let xpos = Math.round(x - rootPos.left)\n    let ypos = Math.round(y - rootPos.top)\n\n    if (!excludeToolTipDiv) {\n      // Consider toolTip offset for position\n      xpos = Math.round(xpos - (box.width / 2))\n      ypos = Math.round(ypos - (box.height / 2))\n    }\n\n\n    this.toolTipDiv\n      .style('left', xpos + 'px')\n      .style('top', ypos + 'px')\n      .style('display', 'inline-block')\n      .html(this.opts.format.call(this.opts.chart, displayData.data)) // Used format.call(), so that external fun can have access of chart Instance\n  }\n\n  showHide (showFlag) {\n    showFlag = !!showFlag\n    this.toolTipDiv && this.toolTipDiv.classed('vc-hidden', !showFlag)\n  }\n\n  remove () {\n    this.$toolTipDiv && this.$toolTipDiv.remove()\n    this.opts = null\n  }\n}\n"],"sourceRoot":""}