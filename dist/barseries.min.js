(window.webpackJsonpvc=window.webpackJsonpvc||[]).push([[2],{157:function(t,s,i){"use strict";i.r(s);var a=i(11),e=i.n(a),r=i(31),o=i.n(r),n=i(62),h=i.n(n),c=i(5),l=i.n(c),p=i(6),u=i.n(p),d=i(4),x=i.n(d),m=i(7),f=i.n(m),v=i(8),b=i.n(v),g=i(63),A=i.n(g),y=i(9),O=i.n(y),T=i(0),I=i(64),S=i(46),R=i(67),_=i(1),k=i(28),D=i(85),j=function(t){function s(t){x()(this,s);var i=b()(this,(s.__proto__||u()(s)).call(this,t));return i.opts=t,i}return O()(s,t),f()(s,[{key:"dataExecutor",value:function(){try{return this.dataOptions={},this.opts.data&&(this.dataOptions.data=this.opts.data),this.opts.series&&(this.dataOptions.series=this.opts.series),this.opts.yAxis&&(this.dataOptions.yAxis=this.opts.yAxis),l()(this.dataOptions,this.constructChartData()),l()(this.dataOptions,this.constructXAxisInfo()),l()(this.dataOptions,this.constructPlotInfo()),l()(this.dataOptions,this.constructYAxisInfo()),this.dataOptions}catch(t){throw console.log("Error encountered while bar series JSON parsing :",t),this.opts.onError(t),new Error("Invalid JSON received - Error on bar series JSON parsing")}}},{key:"constructChartData",value:function(){var t=this.dataOptions.data.barseries,s=t.columns,i=t.values;if(!(s.length&&i.length))throw new Error("Invalid Bar series JSON received");return{chartData:i}}},{key:"constructXAxisInfo",value:function(){return{timeInfo:{dataIndex:0,timeRange:this.dataOptions.chartData.map((function(t){return t[0]}))}}}},{key:"constructYAxisInfo",value:function(){var t=this.dataOptions,s=t.plotSet,i=t.series,a=t.chartData,r=Object(T.e)(t,"yAxis.left"),o=Object(T.e)(t,"yAxis.right"),n=void 0,h=null,c=null;return r&&e()(r.min)&&e()(r.max)&&(h=[r.min,r.max]),o&&e()(o.min)&&e()(o.max)&&(c=[o.min,o.max]),h&&c||function(){var l=!1;for(n in s)if(!e()(s[n].minVal)||!e()(s[n].maxVal)){l=!0;break}if(l){var p=0;a.forEach((function(t){for(var a in s){var e=s[a];(p=t[e.dataIndex])<e.minVal&&(e.minVal=p),p>e.maxVal&&(e.maxVal=p),i.bar&&i.bar.forEach((function(i){if(i.barType===_.a.STACKED_BAR){var a=i.barOrderMembers,e=0;a.forEach((function(i){e+=s[i.name].visible?t[s[i.name].dataIndex]:0})),e<i.valueRange[0]&&(i.valueRange[0]=e),e>i.valueRange[1]&&(i.valueRange[1]=e)}}))}}))}var u=-1/0,d=-1/0;for(n in i)n===_.a.BAR_KEY&&i[n].forEach((function(t){t.barType===_.a.GROUPED_BAR?t.barOrderMembers.forEach((function(t){s[t.name].visible&&s[t.name].plotAxis[0]===_.a.DIR_LEFT&&s[t.name].maxVal>u&&(u=s[t.name].maxVal),s[t.name].visible&&s[t.name].plotAxis[0]===_.a.DIR_RIGHT&&s[t.name].maxVal>d&&(d=s[t.name].maxVal)})):t.barType===_.a.STACKED_BAR&&(t.plotAxis[0]===_.a.DIR_LEFT&&t.valueRange[1]>u&&(u=t.valueRange[1]),t.plotAxis[0]===_.a.DIR_RIGHT&&t.valueRange[1]>d&&(d=t.valueRange[1]))}));var x=1/0,m=1/0;for(n in s)s[n].plotAxis&&"left"===s[n].plotAxis[0]&&s[n].visible&&s[n].minVal<x&&(x=s[n].minVal),s[n].plotAxis&&"right"===s[n].plotAxis[0]&&s[n].visible&&s[n].minVal<m&&(m=s[n].minVal);var f=void 0,v=void 0;[x,u].reduce((function(t,s){return e()(t)&&e()(s)}))?(f=Object(T.e)(t,"yAxis.left.min"),f=e()(f)?f:x,v=Object(T.e)(t,"yAxis.left.max"),(v=e()(v)?v:u)||(v=f+80),h=[f,v]):h=!!r&&[0,80],[m,d].reduce((function(t,s){return e()(t)&&e()(s)}))?(f=Object(T.e)(t,"yAxis.right.min"),f=e()(f)?f:m,v=Object(T.e)(t,"yAxis.right.max"),(v=e()(v)?v:d)||(v=f+80),c=[f,v]):c=!!o&&[0,80]}(),{yRange:h,yRange2:c}}},{key:"constructPlotInfo",value:function(){var t=this.dataOptions,s=t.data.barseries,i=s.columns.slice(1),a=1,e={},r=t.series,o=void 0,n=s.color||[],h=Object(T.e)(t,"yAxis.left"),c=Object(T.e)(t,"yAxis.right");for(o in i.forEach((function(t){var s=Object(T.n)(t);e[s]={name:t,dataIndex:a,minVal:1/0,maxVal:-1/0,visible:!0,color:n[a]||"#000"},a++})),r)"bar"===o&&r[o].forEach((function(t){var s=t.barOrderMembers;t.valueRange=[1/0,-1/0],s.forEach((function(s){s.name=Object(T.n)(s.name);var i=s.color;if(!i)throw"Color not present for series "+t.name;i&&(e[s.name].color=i);var a=s.plotAxis||["left","bottom"];e[s.name].plotAxis=a;var r="left"===a[0]?h.unit:c.unit;e[s.name].unit=r,Object(T.h)(s.visible)&&(e[s.name].visible=s.visible)}))}));return{series:r,plotSet:e}}}]),s}(k.a),w=i(10),E=i(2),L=function(t){function s(t){x()(this,s);var i=b()(this,(s.__proto__||u()(s)).call(this));i.opts=l()({className:"",plotAxis:[_.a.DIR_LEFT,_.a.DIR_BOTTOM],barData:null,xAxisTarget:null,barType:_.a.GROUPED_BAR,barOrderMembers:{},visible:!0,events:{}},t);var a=i,e=i.opts.chart.options.plotSet;i.opts.barOrderIndex=i.opts.barOrderMembers.filter((function(t){return e[t.name].visible||!1})).map((function(t){return e[t.name].dataIndex})),i.opts.seriesLength=i.opts.barOrderIndex.length;var r=Object(T.e)(i.opts,"chart.xAxis.scale");i.opts.plotAxis.indexOf(_.a.DIR_TOP)>-1&&(r=Object(T.e)(i.opts,"chart.xAxis2.scale"));var o=Object(T.e)(i.opts,"chart.yAxis.scale");i.opts.plotAxis.indexOf(_.a.DIR_RIGHT)>-1&&(o=Object(T.e)(i.opts,"chart.yAxis2.scale")),i.xScale=r,i.yScale=o;var n=i.opts.barData;return i.opts.seriesArr=[],i.opts.xAxisArr=[],n.forEach((function(t,s){i.opts.xAxisArr.push(t[i.opts.xAxisTarget]),i.opts.barOrderIndex.forEach((function(s,i){a.opts.seriesArr[i]||(a.opts.seriesArr[i]=[]),a.opts.seriesArr[i].push(t[s])}))})),i.opts.barStack=Object(E.B)().keys(Object(E.t)(i.opts.seriesLength))(Object(E.F)(i.opts.seriesArr)),i.yMaxGrouped=Object(E.p)(i.opts.seriesArr,(function(t){return Object(E.p)(t)})),i.yMaxStacked=Object(E.p)(i.opts.barStack,(function(t){return Object(E.p)(t,(function(t){return t[1]}))})),i}return O()(s,t),f()(s,[{key:"draw",value:function(){var t=this,s=this,i={},a=this.opts.chart.options.plotSet;this.opts.barOrderMembers.filter((function(t){return a[t.name].visible||!1})).forEach((function(t,s){var e=a[t.name];i[e.dataIndex-1]=t.name}));var e=this.opts.chart.container.select("svg clipPath");this.barSeries=this.opts.chart.graphZone.selectAll(".vc-bar-series").data(this.opts.barStack).enter().append("g").attr("clip-path","url(#"+e.attr("id")+")").attr("class","vc-bar-series").attr("fill",(function(t,s){return a[i[s]].color})).attr("seriesName",(function(t,s){return i[s]})).attr("seriesIndex",(function(t,s){return s})),this.bars=this.barSeries.selectAll("rect").data((function(t){return t})).enter().append("rect").attr("x",(function(t,i){return s.xScale(s.opts.xAxisArr[i])})).attr("fill",(function(t,s){var i=Object(E.A)(this.parentNode).attr("seriesName");return a[i].colorArr&&a[i].colorArr[s]})).attr("y",this.opts.chart.chartHeight).attr("width",this.xScale.bandwidth()).attr("height",0).on("mousemove",(function(t,i){s.opts.chart.tooltip&&s.opts.chart.tooltip.hover(E.j.pageX,E.j.pageY,{data:{val:s.opts.barData[i],ind:i}})})).on("mouseout",(function(t){s.opts.chart.tooltip&&s.opts.chart.tooltip.hide()}));var r=function(i){var a=t.opts.events[i];s.bars.on(i,(function(){a.apply(s.opts.chart,arguments)}))};for(var o in this.opts.events)r(o)}},{key:"update",value:function(){var t=this;this.opts.barType===_.a.STACKED_BAR?this.bars.attr("y",(function(s){return t.yScale(s[1])})).attr("height",(function(s){return t.yScale(s[0])-t.yScale(s[1])})).attr("x",(function(s,i){return t.xScale(t.opts.xAxisArr[i])})).attr("width",t.xScale.bandwidth()):this.bars.attr("x",(function(s,i){return t.xScale(t.opts.xAxisArr[i])+t.xScale.bandwidth()/t.opts.seriesLength*Object(E.A)(this.parentNode).attr("seriesIndex")})).attr("width",t.xScale.bandwidth()/t.opts.seriesLength).attr("y",(function(s){return t.yScale(s[1]-s[0])})).attr("height",(function(s){return t.yScale(0)-t.yScale(s[1]-s[0])}))}},{key:"showHide",value:function(t){t=!!t,this.barSeries.classed("vc-hidden",!t),this.opts.visible=t}},{key:"redraw",value:function(){var t=this.opts.chart.options.plotSet;this.opts.barOrderIndex=this.opts.barOrderMembers.filter((function(s){return t[s.name].visible||!1})).map((function(s){return t[s.name].dataIndex})),this.barSeries&&this.barSeries.remove(),this.draw()}},{key:"remove",value:function(){this.barSeries&&this.barSeries.remove(),this.bars=null,this.opts=null}}]),s}(w.a),M=function(t){function s(t){x()(this,s);var i=b()(this,(s.__proto__||u()(s)).call(this));i.opts=t,i.plotSeries=[];var a=i.opts.chart.options.chartData,e=i.opts.chart.options.series,r=Object(T.g)(e.bar)&&e.bar.length,o=Object(T.g)(e.stack)&&e.stack.length,n=[];return r?n=e.bar:o&&(n=e.stack),n.forEach((function(t){i.plotSeries.push(new L({chart:i.opts.chart,className:t.className||t.name,plotAxis:t.plotAxis,xAxisTarget:i.opts.chart.options.timeInfo.dataIndex,barOrderMembers:t.barOrderMembers||t.stackOrderMembers,barType:t.barType||"",events:t.events||{},barData:a}))})),i}return O()(s,t),s}(i(69).a),P=i(68),F=function(t){function s(t,i){if(x()(this,s),i.startTime=new Date,i.dataParser||(i.dataParser=new j(i)),!(i.dataParser instanceof k.a))throw new Error("DataParser in options dosen't have implementation of ChartAxisParser");var a=b()(this,(s.__proto__||u()(s)).call(this,t,i));return Object(R.a)(a.options),Object(T.l)(a.dataParser)&&l()(a.options,a.dataParser.dataExecutor()),a.chartInitilize(),h()((function(){return a.draw()})),a}return O()(s,t),f()(s,[{key:"chartInitilize",value:function(){var t=void 0,s=this.options.yRange,i=this.options.yRange2,a=this.options.timeInfo;s&&(t=Object(T.e)(this,"options.yAxis.left"),this.yAxis=new S.a(o()({chart:this,position:"y",orient:"left",rangeScale:[this.chartHeight,0],domainScale:s},t)),this.chartComponentsArr.push(this.yAxis)),i&&(t=Object(T.e)(this,"options.yAxis.right"),this.yAxis2=new S.a(o()({chart:this,position:"y",orient:"right",rangeScale:[this.chartHeight,0],domainScale:i},t)),this.chartComponentsArr.push(this.yAxis2)),a.timeRange&&(t=Object(T.e)(this,"options.xAxis.bottom"),this.xAxis=new S.a(o()({chart:this,position:"x",orient:"bottom",rangeScale:[0,this.chartWidth],domainScale:a.timeRange},t)),this.chartComponentsArr.push(this.xAxis));var e=Object(T.e)(this,"options.tooltip");e.visible&&(this.tooltip=new D.a(o()({chart:this},e)),this.chartComponentsArr.push(this.tooltip)),this.options.series&&(this.series=new M({chart:this}),this.chartComponentsArr.push(this.series)),this.options.legend&&this.options.legend.visible&&(this.legends=new P.a({chart:this,legendPrefix:this.options.legend.legendPrefix,position:_.a.DIR_TOP,disableSeriesToggle:!0,onLegendChange:this.options.legend.onLegendChange}),this.chartComponentsArr.push(this.legends))}},{key:"draw",value:function(){console.log("BarSeriesChart draw",this),A()(s.prototype.__proto__||u()(s.prototype),"draw",this).call(this),this.options.afterDraw.call(this),this.reScaleYAxis(),this.chartResponsive(),this.mouseHandler&&this.mouseHandler.triggerMouseAction(),this.timeDiff=(new Date).getTime()-this.options.startTime.getTime(),this.options.onComplete.call(this,this.timeDiff)}},{key:"reScaleYAxis",value:function(t){var s=this,i=void 0,a=void 0,r=void 0,o=void 0,n=!0,h=!0;t===_.a.DIR_LEFT&&(h=!1),t===_.a.DIR_RIGHT&&(n=!1),o=Object(T.e)(this.options,"yAxis.left.max"),this.options.yRange&&n&&!e()(o)&&(i=this.yAxis.tickValues).length>1&&(a=i[0]-i[1],r=i[0]+a,this.options.yRange[1]=r,this.yAxis.modifyAxisProps({domainScale:this.options.yRange})),o=Object(T.e)(this.options,"yAxis.right.max"),this.options.yRange2&&h&&!e()(o)&&(i=this.yAxis2.tickValues).length>1&&(a=i[0]-i[1],r=i[0]+a,this.options.yRange2[1]=r,this.yAxis2.modifyAxisProps({domainScale:this.options.yRange2}));var c={},l=0;this.options.yRange&&(c[_.a.DIR_LEFT]={},c[_.a.DIR_LEFT].class=".vc-axis-left",c[_.a.DIR_LEFT].maxText=""),this.options.yRange2&&(c[_.a.DIR_RIGHT]={},c[_.a.DIR_RIGHT].class=".vc-axis-right",c[_.a.DIR_RIGHT].maxText="");var p=this.svg.append("g").attr("class","vc-axis"),u=function(t){s.container.select("svg "+c[t].class).selectAll("text").each((function(s){var i=Object(E.A)(this).text()||"";i.length>c[t].maxText.length&&(c[t].maxText=i)})),p.selectAll(".dummyText").data([c[t].maxText]).enter().append("text").text(String).each((function(t,s){l=this.getComputedTextLength()})),s.margin[t]=Math.round(l)+_.a.Y_AXIS_SPACE};for(var d in c)u(d);p.remove(),this.chartWidth=this.chartFullSpace.width-this.margin.left-this.margin.right,this.update()}}]),s}(I.a);s.default=F},46:function(t,s,i){"use strict";var a=i(5),e=i.n(a),r=i(6),o=i.n(r),n=i(4),h=i.n(n),c=i(7),l=i.n(c),p=i(8),u=i.n(p),d=i(9),x=i.n(d),m=i(10),f=i(2),v=i(1),b=i(0),g=function(t){function s(t){h()(this,s);var i=u()(this,(s.__proto__||o()(s)).call(this));i.opts=e()({className:"",position:"y",orient:"left",label:"",unit:"",rangeScale:[0,1e3],domainScale:[0,100],scaleType:"",axisClamp:!0,tickNumber:null,rotateText:!1,textLimit:8,tickFormatter:!1,showGridLines:!1,tickPadding:v.a.TICK_PADDING,scalePadding:v.a.SCALE_PADDING,visible:!0},t),i.axis=null,"scaleBand"===i.opts.scaleType?i.scale=Object(f.u)():(i.scale=Object(f.v)(),i.opts.unit===v.a.UNITS_TIME&&(i.scale=Object(f.y)())),"x"===i.opts.position&&(i.opts.orient===v.a.DIR_BOTTOM?i.axis=Object(f.c)():i.opts.orient===v.a.DIR_TOP&&(i.axis=Object(f.f)()),!0===i.opts.showGridLines&&i.axis.tickSizeInner(-i.opts.chart.chartHeight)),i.tickValues=[];var a=i;if("y"===i.opts.position&&(i.opts.orient===v.a.DIR_LEFT?i.axis=Object(f.d)():i.opts.orient===v.a.DIR_RIGHT&&(i.axis=Object(f.e)(),i.axis.tickSizeInner(0)),!0===i.opts.showGridLines&&i.axis.tickSizeInner(-i.opts.chart.chartWidth),Object(b.j)(i.opts.tickFormatter))){var r=i.opts.tickFormatter;i.opts.tickFormatter=function(t){return a.tickValues.unshift(t),r(t)}}return i.opts.tickPadding>0&&i.axis.tickPadding(i.opts.tickPadding),i}return x()(s,t),l()(s,[{key:"modifyAxisProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e()(this.opts,t),this.update()}},{key:"draw",value:function(){this.transformAttr=null,this.opts.orient===v.a.DIR_BOTTOM?this.transformAttr="translate(0,"+this.opts.chart.chartHeight+")":this.opts.orient===v.a.DIR_RIGHT&&(this.transformAttr="translate("+this.opts.chart.chartWidth+",0)"),this.axisTag=this.opts.chart.graphZone.append("g").attr("class","vc-axis vc-axis-"+this.opts.orient+" vc-axis-"+this.opts.className),Object(b.j)(this.opts.tickFormatter)&&this.axis.tickFormat(this.opts.tickFormatter),this.opts.label&&(this.opts.axisLabelTag=this.axisTag.append("text").attr("class","vc-axis-label").text(this.opts.label)),this.update(),!this.opts.visible&&this.axisTag.classed("vc-hidden",!0)}},{key:"update",value:function(){if(this.opts.orient===v.a.DIR_BOTTOM&&(this.opts.rangeScale=[0,this.opts.chart.chartWidth]),this.opts.orient===v.a.DIR_RIGHT&&(this.transformAttr="translate("+this.opts.chart.chartWidth+",0)"),this.opts.label){var t=0,s=0,i=0;this.opts.orient===v.a.DIR_BOTTOM?(t=Math.floor(this.opts.chart.chartWidth/2),s=v.a.X_AXIS_LABEL_Y):this.opts.orient!==v.a.DIR_LEFT&&this.opts.orient!==v.a.DIR_RIGHT||(this.opts.orient===v.a.DIR_LEFT?(t=-this.opts.chart.margin.left+v.a.BRUSHY_BUFFER,i=270):(t=this.opts.chart.margin.right-v.a.BRUSHY_BUFFER,i=90),s=Math.floor(this.opts.chart.chartHeight/2)),this.opts.axisLabelTag.attr("transform","translate("+t+","+s+") rotate("+i+")")}this.tickValues=[];var a=[this.opts.domainScale[0],this.opts.domainScale[this.opts.domainScale.length-1]];if("scaleBand"===this.opts.scaleType?(a=this.opts.domainScale,this.scale.padding(this.opts.scalePadding)):this.opts.axisClamp&&this.scale.clamp(),this.scale.range(this.opts.rangeScale).domain(a),this.axis.scale(this.scale),Object(b.k)(this.opts.tickNumber)){var e=this.opts.tickNumber;if("x"===this.opts.position&&this.opts.unit===v.a.UNITS_TIME){var r=Math.floor(this.opts.chart.chartWidth/60),o=Math.floor((this.opts.domainScale[1]-this.opts.domainScale[0])/864e5)+1;o>2&&o<e&&(e=o);var n=Math.floor((this.opts.domainScale[1]-this.opts.domainScale[0])/6e4);n<e&&(e=n),r<e&&(e=r)}this.axis.ticks(e)}else Object(b.j)(this.opts.tickNumber)&&this.axis.ticks(this.opts.tickNumber());this.transformAttr&&this.axisTag.attr("transform",this.transformAttr),this.opts.showGridLines&&"y"===this.opts.position&&this.axis.tickSizeInner(-this.opts.chart.chartWidth),this.axisTag.call(this.axis);var h=this.opts.textLimit,c=Object(b.j)(this.opts.tickFormatter)?this.opts.tickFormatter:b.c;"slant"===this.opts.rotateText?this.axisTag.selectAll("text").style("text-anchor","end").attr("y","8").attr("dx","-1.0em").attr("dy",".15em").attr("transform","rotate(-65)").text((function(t,s){return Object(b.p)(c(t),h)})):"vertical"===this.opts.rotateText&&this.axisTag.selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").style("text-anchor","start").text((function(t,s){return Object(b.p)(c(t),h)}))}},{key:"showHide",value:function(t){t=!!t,this.axisTag&&this.axisTag.classed("vc-hidden",!t),this.opts.axisLabelTag&&this.opts.axisLabelTag.classed("vc-hidden",!t),this.opts.visible=t}},{key:"remove",value:function(){this.opts.axisLabelTag&&this.opts.axisLabelTag.remove(),this.axisTag&&this.axisTag.remove(),this.scale=null,this.axis=null,this.opts=null}}]),s}(m.a);s.a=g},85:function(t,s,i){"use strict";var a=i(84),e=i.n(a),r=i(5),o=i.n(r),n=i(6),h=i.n(n),c=i(4),l=i.n(c),p=i(7),u=i.n(p),d=i(8),x=i.n(d),m=i(9),f=i.n(m),v=i(10),b=i(0),g=function(t){function s(t){l()(this,s);var i=x()(this,(s.__proto__||h()(s)).call(this));return i.opts=o()({visible:!0},t),Object(b.j)(i.opts.format)||(i.opts.format=function(t){return"<span> ToolTip Text : </span><br/><span>"+e()(t)+"</span>"}),i}return f()(s,t),u()(s,[{key:"draw",value:function(){this.toolTipDiv=this.opts&&this.opts.chart.container.append("div").attr("class","vc-tooltip-display "+this.opts.className)}},{key:"hover",value:function(t,s,i,a){this.showHide(!0);var e=Object(b.b)(this.toolTipDiv),r=Object(b.b)(this.opts.chart.container),o=Math.round(t-r.left),n=Math.round(s-r.top);a||(o=Math.round(o-e.width/2),n=Math.round(n-e.height/2)),this.toolTipDiv.style("left",o+"px").style("top",n+"px").style("display","inline-block").html(this.opts.format.call(this.opts.chart,i.data))}},{key:"showHide",value:function(t){t=!!t,this.toolTipDiv&&this.toolTipDiv.classed("vc-hidden",!t)}},{key:"remove",value:function(){this.$toolTipDiv&&this.$toolTipDiv.remove(),this.opts=null}}]),s}(v.a);s.a=g}}]);
//# sourceMappingURL=barseries.min.js.map